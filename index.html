<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Free Games Finder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Saj√°t st√≠lus -->
    <link rel="stylesheet" href="css/style.css">
    
</head>
<body>

<!-- Toast Container -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 99999;">
    <div id="gameToast" class="toast align-items-center text-white border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body" id="toastMessage">
                <!-- Toast √ºzenet -->
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>
<div id="sidebar">
    <button title="Language / Nyelv / Jazyk" onclick="toggleLanguageMenu()" id="langButton">üåç</button>
    <div id="languageMenu" class="language-menu" style="display: none;">
        <button onclick="changeLanguage('hu')" class="lang-option">
            <img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f1ed-1f1fa.svg" alt="HU" width="50">
        </button>
        
        <button onclick="changeLanguage('en')" class="lang-option">
            <img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f1ec-1f1e7.svg" alt="EN" width="50">
        </button>
        
        <button onclick="changeLanguage('sk')" class="lang-option">
            <img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f1f8-1f1f0.svg" alt="SK" width="50">
        </button>
    </div>
    <button title="üìä" onclick="openStatsModal()" data-translate="tooltip-stats">üìä</button>
    <button title="‚≠ê" onclick="openFavoritesModal()" data-translate="tooltip-favorites">‚≠ê</button>
    <button title="üî•" onclick="openTopGamesModal()" data-translate="tooltip-top">üî•</button>
</div>

<!-- Stats Modal -->
<div class="modal fade" id="statsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content stats-modal p-4">
            <div class="modal-header border-0 pb-3">
                <h4 class="modal-title stats-modal-title" data-translate="stats-title">Statisztika - M≈±faj szerinti eloszl√°s</h4>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center" style="padding: 30px 20px;">
                <div class="canvas-container">
                    <canvas id="statsCanvasModal"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Favorites Modal -->
<div class="modal fade" id="favoritesModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content p-3">
            <div class="modal-header border-0">
                <h5 class="modal-title" data-translate="favorites-title">Kedvenc J√°t√©kok</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="favoritesModalBody">
            </div>
        </div>
    </div>
</div>

<!-- Top Games Modal -->
<div class="modal fade" id="topGamesModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content p-3">
            <div class="modal-header border-0">
                <h5 class="modal-title" data-translate="top-title">Top J√°t√©kok</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="topGamesList" class="list-group"></div>
            </div>
        </div>
    </div>
</div>

<header>
    <div class="header-content">
        <div class="header-icon">üéÆ</div>
        <h1 class="header-title">
            <span class="title-free" data-translate="header-free">Free</span>
            <span class="title-games" data-translate="header-games">Games</span>
            <span class="title-finder" data-translate="header-finder">Finder</span>
        </h1>
        <p class="header-subtitle" data-translate="header-subtitle">Discover the best free-to-play games</p>
    </div>
    <div class="header-decoration">
        <div class="decoration-circle circle-1"></div>
        <div class="decoration-circle circle-2"></div>
        <div class="decoration-circle circle-3"></div>
    </div>
</header>

<div class="container mb-5">
    <!-- Filters -->
    <div id="filters" class="d-flex flex-wrap justify-content-center gap-2 mb-4 align-items-center">
        <input type="text" id="searchInput" class="form-control" style="max-width:300px;" placeholder="Search games..." data-translate-placeholder="search-placeholder">
        <select id="platformSelect" class="form-select" style="max-width:200px;">
            <option value="all" data-translate="platform-all">All Platforms</option>
            <option value="pc" data-translate="platform-pc">PC (Windows)</option>
            <option value="browser" data-translate="platform-browser">Web Browser</option>
        </select>
        <select id="categorySelect" class="form-select" style="max-width:200px;">
            <option value="" data-translate="genre-all">All Genres</option>
            <option value="Shooter">Shooter</option>
            <option value="MMORPG">MMORPG</option>
            <option value="Racing" data-translate="genre-racing">Racing</option>
            <option value="Strategy">Strategy</option>
            <option value="Sports">Sports</option>
            <option value="Action">Action</option>
            <option value="Card Game" data-translate="genre-card">Card Game</option>
        </select>
        <select id="sortSelect" class="form-select" style="max-width:200px;">
            <option value="relevance" data-translate="sort-relevance">Relevance</option>
            <option value="release-date" data-translate="sort-date">Release Date</option>
            <option value="alphabetical" data-translate="sort-alpha">Alphabetical</option>
        </select>
        <button class="btn btn-primary btn-lg" onclick="filterAndSortGames()" data-translate="btn-search">Search</button>
    </div>

    <!-- Games -->
    <h3 class="mt-4 text-center" data-translate="games-title">J√°t√©kok</h3>
    <div id="games"></div>
    
    <div id="loading-indicator" style="display: none; text-align: center; padding: 20px; opacity: 0.5;">
        <div class="spinner-border text-primary" role="status" style="width: 2rem; height: 2rem;">
            <span class="visually-hidden" data-translate="loading">Loading...</span>
        </div>
    </div>
</div>

<!-- Game Modal -->
<div class="modal fade" id="gameModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content p-0">

            <div class="modal-header border-0 pb-0 justify-content-center position-relative pt-2">
                <h3 class="modal-title text-center w-100 py-2" id="modalTitle" style="color: #66FCF1; font-weight: 700; font-size: 2.2rem;"></h3>
                <button type="button" class="btn-close btn-close-white position-absolute" style="right: 15px; top: 15px;" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4 pt-2">
                <div class="text-center mb-4">
                    <img id="modalImage" src="" alt="" class="img-fluid rounded game-modal-image-large">
                </div>
                <div class="row align-items-start">
                    <div class="col-md-7">
                        <p id="modalDesc" class="game-description mb-3" style="line-height: 1.6;"></p>
                        
                        <div class="mb-2">
                            <p class="mb-1"><strong data-translate="modal-platform">Platform:</strong> <span id="modalPlatform" style="color: #66FCF1;"></span></p>
                        </div>
                        
                        <div class="mb-0">
                            <p class="mb-0"><strong data-translate="modal-genre">M≈±faj:</strong> <span id="modalCategory" style="color: #66FCF1;"></span></p>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="d-flex flex-column gap-3">
                            <a id="modalPlay" href="#" target="_blank" class="btn btn-success btn-lg w-100" data-translate="btn-play">
                                <i class="me-2">‚ñ∂</i>Play Now
                            </a>
                            <button id="favButton" class="btn btn-warning btn-lg w-100" data-is-favorite="false" data-translate="btn-add-fav">
                                ‚≠ê Kedvencekhez ad√°s
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <script src="js/sqlite-init.js"></script>
    <script src="js/app.js"></script>   

</body>
</html>
